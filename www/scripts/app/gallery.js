"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();define("app/gallery",["jquery","fotorama","app/tpl/gallery/labels","app/popup","app/utils"],function(e,t,a,i){return function(){function t(e){_classCallCheck(this,t),this.$galleryWrap=e,this.$gallery=e.find(".b-gallery__base"),this.$prev=e.find(".j-gallery__prev"),this.$next=e.find(".j-gallery__next"),this.isLoop=this.$gallery.data("loop"),this.labels=this.$gallery.data("labels"),this.disabled="is-disabled",this.eventShow(),this.eventReady(),this.initGallery(),this.increase()}return _createClass(t,[{key:"initGallery",value:function(){this.$gallery.fotorama()}},{key:"eventShow",value:function(){var e=this;this.$gallery.on("fotorama:show",function(t,a){e.toggleArrowView(a)})}},{key:"eventReady",value:function(){var e=this;this.$galleryWrap.css("opacity",1),this.$gallery.on("fotorama:ready",function(t,a){e.bindArrowClick(a),e.arrowView(a),e.labelsCreate(a),e.centerArrowsVertically(a),e.onWindowResize(a)})}},{key:"bindArrowClick",value:function(e){this.$prev.click(function(){e.show("<")}),this.$next.click(function(){e.show(">")})}},{key:"arrowView",value:function(e){1===e.size&&(this.$prev.addClass(this.disabled),this.$next.addClass(this.disabled))}},{key:"toggleArrowView",value:function(e){var t=0===e.activeIndex?"addClass":"removeClass",a=e.size-e.activeIndex==1?"addClass":"removeClass";this.isLoop||(this.$prev[t](this.disabled),this.$next[a](this.disabled))}},{key:"centerArrowsVertically",value:function(t){var a=e(t.activeFrame.$stageFrame[0]).height(),i=a/2-this.$prev.height()/2;this.$prev.css({top:i}),this.$next.css({top:i})}},{key:"onWindowResize",value:function(t){var a=this;e(window).on("resize",e.debounce(300,function(){a.centerArrowsVertically(t)}))}},{key:"labelsCreate",value:function(){if(this.labels&&"object"===_typeof(this.labels)){var t=this.$gallery.find(".fotorama__nav__shaft"),i=this.$gallery.data("thumbwidth"),n=this.$gallery.data("thumbmargin")||2,l={elements:[]};e.each(this.labels,function(e,t){l.elements.push({position:(parseInt(i)+n)*e,text:t})}),t.append(a(l))}}},{key:"increase",value:function(){var t=this;if(this.$zoom=this.$galleryWrap.find(".b-gallery__increase"),this.$zoom){this.$galleryContainer=e(".b-construction-progress__gallery");var a=this.$zoom.parent(this.$galleryWrap);return this.$zoom.on("click",function(){e(".b-popup__cnt").append(a),t.$galleryContainer.html("&nbsp;")}),new i(this.$zoom)}}}]),t}()});
//# sourceMappingURL=../sourcemaps/app/gallery.js.map
