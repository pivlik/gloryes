"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}();define("app/favorite",["jquery"],function(t){return function(){function e(){_classCallCheck(this,e),this.$el=".j-favorite",this.active="is-active",this.$target=t(".j-favorite-target"),this.numberFavorite=this.$target.find(".b-favorite__num"),this.bindClick()}return _createClass(e,[{key:"bindClick",value:function(){var e=this;t(document).on("click",this.$el,function(){e.changeActiveClass(t(this)),e.opacityRow(t(this))})}},{key:"changeActiveClass",value:function(t){t[t.hasClass(this.active)?"removeClass":"addClass"](this.active),this.send(t)}},{key:"send",value:function(e){var a=this,i=e.data("flat-id"),s=e.hasClass(this.active)?"add":"del",n={id:i,action:s};t.ajax({url:"/ajax/favorite.php",type:"post",dataType:"json",data:n,success:function(t){a.animateAddInFavorite(e,t.ret),a.changeStateTargetBlock(t.ret)}})}},{key:"animateAddInFavorite",value:function(e){this.$target.length&&e.hasClass(this.active)&&e.clone().offset({top:e.offset().top,left:e.offset().left}).css({opacity:"0.5",position:"absolute","z-index":"100"}).appendTo(t("body")).animate({top:this.$target.offset().top+10,left:this.$target.offset().left+10,width:75,height:75},1e3,function(){t(this).detach()})}},{key:"changeStateTargetBlock",value:function(t){t=parseInt(t,10),0===t?this.$target.removeClass(this.active):(this.$target.addClass(this.active),this.numberFavorite.text(t))}},{key:"opacityRow",value:function(t){if(t.hasClass("j-favorite-page")){var e=t.parents("tr");e[e.hasClass(this.active)?"removeClass":"addClass"](this.active)}}}]),e}()});
//# sourceMappingURL=../sourcemaps/app/favorite.js.map
